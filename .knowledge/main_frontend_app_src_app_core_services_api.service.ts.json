{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service called ApiService that wraps around the HttpClient to centralize API interactions. It provides methods for GET and POST requests, performs initial health checks, and includes diagnostics for debugging issues like CORS and network errors.", "external_files": ["../../../environments/environment", "@angular/core", "@angular/common/http", "rxjs", "rxjs/operators"], "external_methods": ["inject", "HttpClient.get", "HttpHeaders", "Environment.apiBaseUrl", "Observable", "throwError", "of", "catchError", "tap"], "published": ["ApiService"], "classes": [{"name": "ApiService", "description": "An Angular service that manages API calls, base URL configuration, and error handling diagnostics."}], "methods": [{"name": "getBaseUrl", "description": "Returns the current API base URL."}, {"name": "get", "description": "Performs a GET request to the specified API path with optional headers."}, {"name": "post", "description": "Performs a POST request to the specified API path with a request body and optional headers."}, {"name": "safeBodyPreview", "description": "Sanitizes request bodies for logging, masking sensitive fields."}, {"name": "headersToObject", "description": "Converts HTTP headers into a plain object for logging."}, {"name": "describeError", "description": "Generates human-readable description of HTTP errors."}, {"name": "handleError", "description": "Handles HTTP errors, logs diagnostic info, and rethrows errors."}], "calls": ["this.http.get", "this.http.post", "this.handleError", "this.describeError", "headers?.keys()", "res.headers.get"], "search-terms": ["ApiService", "HttpClient wrapper", "health check", "environment.apiBaseUrl", "CORS diagnostics", "Angular injectable service"], "state": 2, "file_id": 23, "knowledge_revision": 113, "git_revision": "f9fada077aaa2d6cebd492d0e87c58fcf7a5af31", "revision_history": [{"55": ""}, {"85": "8f7dab55cc2010ab26127ae81d075c9ecbb8a8ce"}, {"106": "f9fada077aaa2d6cebd492d0e87c58fcf7a5af31"}, {"113": "f9fada077aaa2d6cebd492d0e87c58fcf7a5af31"}], "ctags": [{"_type": "tag", "name": "ApiService", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^export class ApiService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "allowOrigin", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^          const allowOrigin = res.headers.get('Access-Control-Allow-Origin');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "copy", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^        const copy: any = { ...(body as any) };$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "detail", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^    const detail = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "e", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^      const e = error as HttpErrorResponse;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "http", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^  private http = inject(HttpClient);$/", "language": "TypeScript", "kind": "property", "scope": "ApiService", "scopeKind": "class"}, {"_type": "tag", "name": "isAuth", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^    const isAuth = !!url && (url.includes('\\/auth\\/login') || url.includes('\\/auth\\/verify-otp')/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "loc", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^      const loc = (globalThis as any)?.location;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^      message: this.describeError(error),$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "out", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^    const out: Record<string, string> = {};$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^      status: error.status,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "statusText", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^      statusText: error.statusText,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^      url,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/api.service.ts", "pattern": "/^    const url = `${this.baseUrl}${path}`;$/", "language": "TypeScript", "kind": "constant"}], "hash": "22005a70efb8417931cd2571b67e3d9a", "format-version": 4, "code-base-name": "main_frontend_app", "filename": "main_frontend_app/src/app/core/services/api.service.ts", "fields": [{"name": "private http = inject(HttpClient);", "scope": "ApiService", "scopeKind": "class", "description": "unavailable"}]}