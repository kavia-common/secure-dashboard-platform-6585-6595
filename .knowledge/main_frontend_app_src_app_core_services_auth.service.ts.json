{"is_source_file": true, "format": "TypeScript", "description": "This file defines the AuthService class in Angular that manages authentication flows, token storage, and SSR-safe access to browser storage. It includes related interfaces for payloads and responses, and references external ApiService and Angular core modules.", "external_files": ["./api.service"], "external_methods": ["this.api.post"], "published": ["AuthService", "LoginPayload", "OtpPayload", "ForgotPayload", "ResetPayload", "AuthResponse"], "classes": [{"name": "AuthService", "description": "An Angular service class responsible for authentication-related operations such as login, OTP verification, password reset, and token management, with SSR-safe storage handling."}], "methods": [{"name": "login", "description": "Performs login by sending credentials to the API and stores the received token."}, {"name": "verifyOtp", "description": "Verifies OTP and updates the token upon success."}, {"name": "forgotPassword", "description": "Initiates the forgot password process by calling the relevant API endpoint."}, {"name": "resetPassword", "description": "Completes the password reset process."}, {"name": "logout", "description": "Clears stored authentication tokens and updates authentication status."}, {"name": "isAuthenticated", "description": "Checks whether the user is currently authenticated."}, {"name": "getToken", "description": "Retrieves the current authentication token, SSR-safe."}, {"name": "setToken", "description": "Stores a new authentication token in local storage or memory depending on runtime environment."}], "calls": ["this.api.post"], "search-terms": ["AuthService", "AuthResponse", "login", "OTP", "SSR-safe token storage", "Angular service", "localStorage"], "state": 2, "file_id": 24, "knowledge_revision": 80, "git_revision": "8f7dab55cc2010ab26127ae81d075c9ecbb8a8ce", "revision_history": [{"56": ""}, {"75": ""}, {"78": ""}, {"80": "8f7dab55cc2010ab26127ae81d075c9ecbb8a8ce"}], "ctags": [{"_type": "tag", "name": "AuthResponse", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface AuthResponse { token: string; requiresOtp?: boolean; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export class AuthService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "ForgotPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ForgotPayload { email: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "LoginPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginPayload { email: string; password: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "OtpPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface OtpPayload { email: string; otp: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "ResetPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ResetPayload { token: string; password: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "TOKEN_KEY", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  private readonly TOKEN_KEY = 'auth_token';$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ForgotPayload { email: string; }$/", "language": "TypeScript", "kind": "property", "scope": "ForgotPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginPayload { email: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "LoginPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface OtpPayload { email: string; otp: string; }$/", "language": "TypeScript", "kind": "property", "scope": "OtpPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "otp", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface OtpPayload { email: string; otp: string; }$/", "language": "TypeScript", "kind": "property", "scope": "OtpPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginPayload { email: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "LoginPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ResetPayload { token: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "ResetPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "platformId", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  private platformId = inject(PLATFORM_ID);$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "requiresOtp", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface AuthResponse { token: string; requiresOtp?: boolean; }$/", "language": "TypeScript", "kind": "property", "scope": "AuthResponse", "scopeKind": "interface"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface AuthResponse { token: string; requiresOtp?: boolean; }$/", "language": "TypeScript", "kind": "property", "scope": "AuthResponse", "scopeKind": "interface"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ResetPayload { token: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "ResetPayload", "scopeKind": "interface"}], "hash": "2ac221ff1935734d2ead8dc6f03b7c2b", "format-version": 4, "code-base-name": "main_frontend_app", "filename": "main_frontend_app/src/app/core/services/auth.service.ts", "fields": [{"name": "export interface AuthResponse { token: string; requiresOtp?: boolean; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface ForgotPayload { email: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface LoginPayload { email: string; password: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface OtpPayload { email: string; otp: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface ResetPayload { token: string; password: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private readonly TOKEN_KEY = 'auth_token';", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}, {"name": "private platformId = inject(PLATFORM_ID);", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}]}