{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service named AuthService that manages user authentication processes, including login, OTP verification, password reset, and token management with SSR safety considerations.", "external_files": ["./api.service"], "external_methods": ["ApiService.post", "Observable.pipe", "tap", "isPlatformBrowser", "localStorage.getItem", "localStorage.setItem", "localStorage.removeItem"], "published": ["AuthResponse", "LoginPayload", "OtpPayload", "ForgotPayload", "ResetPayload"], "classes": [{"name": "AuthService", "description": "An Angular service that handles authentication functionalities including login, OTP verification, password reset, logout, and token management with SSR compatibility."}], "methods": [{"name": "login", "description": "Sends login request to API and stores token on success."}, {"name": "verifyOtp", "description": "Verifies OTP and stores token if issued."}, {"name": "forgotPassword", "description": "Initiates forgot password flow via API."}, {"name": "resetPassword", "description": "Completes password reset process via API."}, {"name": "logout", "description": "Clears stored authentication token and marks user as logged out."}, {"name": "isAuthenticated", "description": "Returns whether the user is currently authenticated based on token presence."}, {"name": "getToken", "description": "Retrieve the current authentication token, SSR-safe."}, {"name": "setToken", "description": "Stores the authentication token, either in localStorage (browser) or in-memory (SSR)."}, {"name": "isBrowser", "description": "Checks if the current platform is a browser."}], "calls": ["this.api.post", "this._isAuthed()", "this._isAuthed.set", "this.setToken", "this.getToken", "this.isBrowser", "window.localStorage.setItem", "window.localStorage.getItem", "window.localStorage.removeItem", "isPlatformBrowser"], "search-terms": ["AuthService", "SSR token management", "Angular authentication service", "Auth token storage", "OTP verification"], "state": 2, "file_id": 24, "knowledge_revision": 78, "git_revision": "", "revision_history": [{"56": ""}, {"75": ""}, {"78": ""}], "ctags": [{"_type": "tag", "name": "AuthResponse", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface AuthResponse { token: string; requiresOtp?: boolean; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "AuthService", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export class AuthService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "ForgotPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ForgotPayload { email: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "LoginPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginPayload { email: string; password: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "OtpPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface OtpPayload { email: string; otp: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "ResetPayload", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ResetPayload { token: string; password: string; }$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "TOKEN_KEY", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  private readonly TOKEN_KEY = 'auth_token';$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ForgotPayload { email: string; }$/", "language": "TypeScript", "kind": "property", "scope": "ForgotPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginPayload { email: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "LoginPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface OtpPayload { email: string; otp: string; }$/", "language": "TypeScript", "kind": "property", "scope": "OtpPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "otp", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface OtpPayload { email: string; otp: string; }$/", "language": "TypeScript", "kind": "property", "scope": "OtpPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface LoginPayload { email: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "LoginPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ResetPayload { token: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "ResetPayload", "scopeKind": "interface"}, {"_type": "tag", "name": "platformId", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^  private platformId = inject(PLATFORM_ID);$/", "language": "TypeScript", "kind": "property", "scope": "AuthService", "scopeKind": "class"}, {"_type": "tag", "name": "requiresOtp", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface AuthResponse { token: string; requiresOtp?: boolean; }$/", "language": "TypeScript", "kind": "property", "scope": "AuthResponse", "scopeKind": "interface"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface AuthResponse { token: string; requiresOtp?: boolean; }$/", "language": "TypeScript", "kind": "property", "scope": "AuthResponse", "scopeKind": "interface"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/secure-dashboard-platform-6585-6595/main_frontend_app/src/app/core/services/auth.service.ts", "pattern": "/^export interface ResetPayload { token: string; password: string; }$/", "language": "TypeScript", "kind": "property", "scope": "ResetPayload", "scopeKind": "interface"}], "hash": "2ac221ff1935734d2ead8dc6f03b7c2b", "format-version": 4, "code-base-name": "main_frontend_app", "filename": "main_frontend_app/src/app/core/services/auth.service.ts", "fields": [{"name": "export interface AuthResponse { token: string; requiresOtp?: boolean; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface ForgotPayload { email: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface LoginPayload { email: string; password: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface OtpPayload { email: string; otp: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface ResetPayload { token: string; password: string; }", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private readonly TOKEN_KEY = 'auth_token';", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}, {"name": "private platformId = inject(PLATFORM_ID);", "scope": "AuthService", "scopeKind": "class", "description": "unavailable"}]}